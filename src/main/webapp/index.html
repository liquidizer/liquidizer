<lift:surround with="default">
  <lift:bind-at name="title"><lift:loc>system.homepage</lift:loc></lift:bind-at>
  <lift:bind-at name="content">
    <lift:form>
      <lift:UserInfo.in eager_eval="true">
	<div class="balance">
	  <h2>
	    <lift:loc>welcome.to.liquidizer</lift:loc>,
	    <span class="purple"><me:name/></span>!
	  </h2>
	  <div style="color:red"><lift:Msgs showAll="true"/></div>
	</div>
	<lift:embed what="overview"/>
      </lift:UserInfo.in>
    </lift:form>
    <lift:UserInfo.out form="POST">
      <table>
	<tr>
	  <td>
	    <div class="head">
	      <h2><lift:loc>welcome.to.liquidizer</lift:loc></h2>
	    </div>
	    <div style="color:red"><lift:Msgs showAll="true"/></div>

	    <lift:Invitation.invalid eager_eval="true">
	      Der Invite Code ist vergeben: <lift:Invitation.code/>
	    </lift:Invitation.invalid>

	    <lift:Invitation.validAndFree eager_eval="true">
	      <lift:UserSignUp form="POST">
		<table>
		  <tr>
		    <td/><td colspan="2" style="color:red"><lift:Msgs/></td>
		  </tr>
		  <tr>
      		    <td><lift:loc>user.name</lift:loc></td>
      		    <td><user:name/></td>
		  </tr>
		  <tr>
      		    <td><lift:loc>user.password</lift:loc>
		    </td>
      		    <td><user:passwd1/></td>
		  </tr>
		  <tr>
      		    <td><lift:loc>user.password.repeat</lift:loc></td>
      		    <td><user:passwd2/></td>
		  </tr>
		  <tr height="20px"/>
		  <tr>
		    <td colspan="2">
		      <lift:embed what="legal/signup_note"/>
		    </td>
		  </tr>
		  <tr height="20px"/>
		  <tr>
		    <td><user:submit/></td>
		  </tr>
		</table>
	      </lift:UserSignUp>
	    </lift:Invitation.validAndFree>

	    <lift:Invitation.isEmpty eager_eval="true">
	      <table>
		<tr>
      		  <td><lift:loc>user.name</lift:loc></td>
      		  <td><me:name/></td>
		</tr>
		<tr>
      		  <td><lift:loc>user.password</lift:loc></td>
      		  <td> <me:password/></td>
      		  <td> <me:submit/></td>
		</tr>
		<tr>
		  <td colspan="3"><hr/></td>
		</tr>
	      </table>
	    </lift:Invitation.isEmpty>
	  </td>
	</tr>
	<tr height="30px"/>
	<tr>
	  <td>
	    <lift:embed what="intro"/>
	  </td>
	</tr>
      </table>
    </lift:UserInfo.out>
  </lift:bind-at>
  <lift:bind-at name="sidebar">
    <lift:embed what="infopane"/>
  </lift:bind-at>
</lift:surround>

